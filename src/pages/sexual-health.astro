---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import FilterableComparison from '../components/FilterableComparison.astro';
import QuickPicks from '../components/QuickPicks.astro';
import TrustSignals from '../components/TrustSignals.astro';
import PrivacyAssurance from '../components/PrivacyAssurance.astro';
import Icon from '../components/Icon.astro';
import type { FilterableBrand } from '../components/FilterableComparison.astro';

// Get all brands that offer sexual health services
const allBrands = await getCollection('brands');
const sexualHealthBrands = allBrands
  .filter((brand) => brand.data.categories.includes('sexual-health'))
  .map((brand): FilterableBrand => ({
    name: brand.data.title,
    slug: brand.slug,
    rating: brand.data.rating,
    consultationFee: brand.data.pricing.consultationFee,
    medicationFrom: brand.data.pricing.medicationFrom || brand.data.pricing.consultationFee,
    subscriptionType: brand.data.pricing.subscriptionType,
    pros: brand.data.pros,
    cons: brand.data.cons,
    bestFor: brand.data.bestFor,
    featured: brand.data.featured,
    features: brand.data.features,
    priorities: brand.data.priorities,
    priceMin: brand.data.pricing.priceMin,
    priceMax: brand.data.pricing.priceMax,
  }));

// Quick picks for this category
const quickPicks = [
  {
    segment: 'budget' as const,
    brandName: 'BlueChew',
    brandSlug: 'bluechew',
    detail: '$20/month, no consult fee',
  },
  {
    segment: 'privacy' as const,
    brandName: 'Ro',
    brandSlug: 'ro',
    detail: 'Most discreet, flexible dosing',
  },
  {
    segment: 'speed' as const,
    brandName: 'Hims',
    brandSlug: 'hims',
    detail: '48hr approval, free shipping',
  },
  {
    segment: 'quality' as const,
    brandName: 'Ro',
    brandSlug: 'ro',
    detail: 'Brand & generic, MD oversight',
  },
];

const schema = {
  '@context': 'https://schema.org',
  '@type': 'MedicalWebPage',
  name: 'Best ED Telehealth Services',
  description: 'Compare the best online ED treatment services including Hims, Ro, BlueChew, and more.',
  about: {
    '@type': 'MedicalCondition',
    name: 'Erectile Dysfunction',
  },
};
---

<BaseLayout
  title="Best ED Telehealth Services - Sexual Health Comparison"
  description="Compare the top erectile dysfunction telehealth services. Find the best ED treatment options, pricing, and reviews for Hims, Ro, BlueChew, Manual, and more."
  schema={schema}
>
  <!-- Hero Section -->
  <section class="bg-white py-12 lg:py-16 border-b border-slate-200">
    <div class="container-custom">
      <div class="max-w-4xl">
        <div class="flex items-center gap-2 text-sm text-slate-600 mb-6">
          <a href="/" class="hover:text-brand-accent transition-colors">Home</a>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
          <span class="text-slate-900 font-medium">Sexual Health</span>
        </div>

        <h1 class="text-4xl lg:text-5xl font-bold text-slate-900 mb-4">
          Online ED Treatment: Is It Safe? Is It Legit? Here's the Truth.
        </h1>
        <p class="text-xl text-slate-600 leading-relaxed mb-8">
          You've probably seen ads for Hims, Ro, or BlueChew. Maybe you're wondering if these services are actually safe — or just too good to be true. We'll show you which ones use real doctors, FDA-approved meds, and ship discreetly.
        </p>

        <div class="flex flex-wrap gap-3">
          <a href="#comparison" class="btn-primary">
            See Which Service Fits Me
          </a>
          <a href="#faq" class="btn-outline">
            Common Questions
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Stats -->
  <section class="py-10 bg-slate-50 border-b border-slate-200">
    <div class="container-custom">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8 text-center">
        <div>
          <div class="text-3xl lg:text-4xl font-bold text-slate-900 mb-1">{sexualHealthBrands.length}</div>
          <div class="text-sm text-slate-600">Services Compared</div>
        </div>
        <div>
          <div class="text-3xl lg:text-4xl font-bold text-slate-900 mb-1">$4+</div>
          <div class="text-sm text-slate-600">Starting Price</div>
        </div>
        <div>
          <div class="text-3xl lg:text-4xl font-bold text-slate-900 mb-1">FDA</div>
          <div class="text-sm text-slate-600">Approved</div>
        </div>
        <div>
          <div class="text-3xl lg:text-4xl font-bold text-slate-900 mb-1">24-48h</div>
          <div class="text-sm text-slate-600">Delivery</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Picks Section -->
  <section class="section bg-white">
    <div class="container-custom">
      <QuickPicks picks={quickPicks} category="Sexual Health" />
    </div>
  </section>

  <!-- Privacy Assurance -->
  <section class="py-8 bg-white">
    <div class="container-custom">
      <PrivacyAssurance />
    </div>
  </section>

  <!-- Trust Signals -->
  <section class="py-6 bg-white">
    <div class="container-custom">
      <TrustSignals
        lastUpdated={new Date()}
        reviewsCount={15000}
        servicesCompared={sexualHealthBrands.length}
      />
    </div>
  </section>

  <!-- Comparison Section -->
  <section id="comparison" class="section bg-white">
    <div class="container-custom">
      <div class="mb-10">
        <h2 class="text-3xl lg:text-4xl font-bold text-slate-900 mb-3">
          Service Comparison
        </h2>
        <p class="text-slate-600">
          Updated {new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
        </p>
      </div>

      <FilterableComparison brands={sexualHealthBrands} location="sexual-health-table" />
    </div>
  </section>

  <!-- Treatment Options -->
  <section id="treatments" class="section-light">
    <div class="container-custom">
      <h2 class="text-3xl lg:text-4xl font-bold text-slate-900 mb-4 text-center">
        Treatment Options
      </h2>
      <p class="text-lg text-slate-600 mb-10 text-center max-w-2xl mx-auto">
        Compare the most common ED medications available through telehealth services.
      </p>

      <div class="grid md:grid-cols-3 gap-6">
        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center">
              <Icon name="pill" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Sildenafil</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Generic Viagra</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Take 30-60 minutes before activity. Effects last 4-6 hours. The most well-known and widely available option.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $4-$8/dose</li>
              <li>• Ro: $4-$12/dose</li>
              <li>• BlueChew: ~$20/month</li>
            </ul>
          </div>
        </div>

        <div class="card p-6 ring-2 ring-brand-accent">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-amber-100 text-amber-600 flex items-center justify-center">
              <Icon name="zap" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Tadalafil</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Generic Cialis</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Daily or as-needed dosing. Effects last up to 36 hours. Popular for spontaneity and weekend use.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $3-$10/dose</li>
              <li>• Ro: $4-$11/dose</li>
              <li>• BlueChew: ~$30/month</li>
            </ul>
          </div>
        </div>

        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center">
              <Icon name="target" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Vardenafil</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Generic Levitra</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Similar to Viagra but may work faster for some. Take 30-60 minutes before. Effects last 4-5 hours.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $10-$12/dose</li>
              <li>• Ro: $8-$14/dose</li>
              <li>• Limited availability</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="section bg-white">
    <div class="container-custom max-w-3xl">
      <h2 class="text-3xl lg:text-4xl font-bold text-slate-900 mb-3 text-center">
        Your Questions, Answered
      </h2>
      <p class="text-slate-600 text-center mb-8">
        We asked real users what they wanted to know before trying online ED treatment. Here are the honest answers.
      </p>
      <div class="space-y-4">
        <details class="group card p-6">
          <summary class="flex justify-between items-center font-semibold cursor-pointer list-none text-slate-900">
            <span>Wait, is this actually legal and safe?</span>
            <span class="transition group-open:rotate-180 text-brand-accent">
              <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <p class="text-slate-600 mt-4 leading-relaxed">
            <strong>Yes, it's completely legal.</strong> Every service we list uses licensed US physicians who review your medical history before prescribing. The medications are the exact same FDA-approved drugs you'd get at CVS or Walgreens — just delivered to your door instead. Services like Hims, Ro, and BlueChew have been doing this for years and serve millions of men.
          </p>
        </details>

        <details class="group card p-6">
          <summary class="flex justify-between items-center font-semibold cursor-pointer list-none text-slate-900">
            <span>Will my neighbors/roommates know what's in the package?</span>
            <span class="transition group-open:rotate-180 text-brand-accent">
              <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <p class="text-slate-600 mt-4 leading-relaxed">
            <strong>Nope. The packaging is completely unmarked.</strong> It comes in a plain cardboard box or padded envelope with no logos or medical labels. The return address shows the company name (like "Hims Inc.") but nothing about what's inside. Some services like BlueChew even use generic business names on the return label. Your credit card statement will also show a discrete name, not "ED MEDICATION COMPANY."
          </p>
        </details>

        <details class="group card p-6">
          <summary class="flex justify-between items-center font-semibold cursor-pointer list-none text-slate-900">
            <span>How do I know it'll actually work for me?</span>
            <span class="transition group-open:rotate-180 text-brand-accent">
              <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <p class="text-slate-600 mt-4 leading-relaxed">
            <strong>You don't, until you try it.</strong> ED medications work for about 70-80% of men, but everyone's different. The good news: most services let you switch medications or dosages for free if the first one doesn't work. Start with the lowest dose and adjust from there. If you've never tried Viagra or Cialis before, there's a good chance one of them will help.
          </p>
        </details>

        <details class="group card p-6">
          <summary class="flex justify-between items-center font-semibold cursor-pointer list-none text-slate-900">
            <span>What's the difference between generic and brand-name? Should I pay more?</span>
            <span class="transition group-open:rotate-180 text-brand-accent">
              <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <p class="text-slate-600 mt-4 leading-relaxed">
            <strong>Generic works exactly the same.</strong> Sildenafil is generic Viagra. Tadalafil is generic Cialis. Same active ingredient, same dosage, same effect — just way cheaper. The brand-name pills cost $70+ per dose. Generics are $4-12. Unless you have a specific reason to want the brand name, save your money and get generic.
          </p>
        </details>

        <details class="group card p-6">
          <summary class="flex justify-between items-center font-semibold cursor-pointer list-none text-slate-900">
            <span>Can I just try one dose without committing to a subscription?</span>
            <span class="transition group-open:rotate-180 text-brand-accent">
              <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <p class="text-slate-600 mt-4 leading-relaxed">
            <strong>It depends on the service.</strong> Ro lets you order one-time without a subscription. Hims and BlueChew require subscriptions, but you can cancel anytime (even after the first shipment). Most guys find that if they're using it regularly, the subscription is cheaper anyway. But if you just want to test it first, go with Ro.
          </p>
        </details>

        <details class="group card p-6">
          <summary class="flex justify-between items-center font-semibold cursor-pointer list-none text-slate-900">
            <span>Will my insurance know? Will this affect my premiums?</span>
            <span class="transition group-open:rotate-180 text-brand-accent">
              <svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </summary>
          <p class="text-slate-600 mt-4 leading-relaxed">
            <strong>No. Most of these services don't use insurance at all.</strong> You pay out-of-pocket, which means it never touches your insurance records. That's actually why a lot of guys prefer it — complete privacy. The downside is you can't use your insurance to cover it, but generics are so cheap ($4-12/dose) that it's often cheaper than a co-pay anyway.
          </p>
        </details>
      </div>
    </div>
  </section>

  <!-- Related Content -->
  <section class="section-light border-t border-slate-200">
    <div class="container-custom">
      <h2 class="text-2xl font-bold text-slate-900 mb-6 text-center">
        Explore More Categories
      </h2>
      <div class="grid md:grid-cols-3 gap-6">
        <a href="/hair-health" class="card-hover p-6 group">
          <div class="mb-3">
            <Icon name="hair-health" class="w-8 h-8 text-amber-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Hair Health
          </h3>
          <p class="text-slate-600 text-sm">
            Compare hair loss treatment services and medications.
          </p>
        </a>
        <a href="/testosterone" class="card-hover p-6 group">
          <div class="mb-3">
            <Icon name="testosterone" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Testosterone & Hormones
          </h3>
          <p class="text-slate-600 text-sm">
            TRT clinics and hormone optimization services.
          </p>
        </a>
        <a href="/mental-health" class="card-hover p-6 group">
          <div class="mb-3">
            <Icon name="mental-health" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Mental Health
          </h3>
          <p class="text-slate-600 text-sm">
            Online therapy platforms and psychiatric care.
          </p>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
