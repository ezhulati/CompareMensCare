---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import FilterableComparison from '../components/FilterableComparison.astro';
import QuickPicks from '../components/QuickPicks.astro';
import TrustSignals from '../components/TrustSignals.astro';
import PrivacyAssurance from '../components/PrivacyAssurance.astro';
import FAQSection from '../components/FAQSection.astro';
import Icon from '../components/Icon.astro';
import type { FilterableBrand } from '../components/FilterableComparison.astro';

// Get all brands that offer sexual health services
const allBrands = await getCollection('brands');
const sexualHealthBrands = allBrands
  .filter((brand) => brand.data.categories.includes('sexual-health'))
  .map((brand): FilterableBrand => ({
    name: brand.data.title,
    slug: brand.slug,
    rating: brand.data.rating,
    consultationFee: brand.data.pricing.consultationFee,
    medicationFrom: brand.data.pricing.medicationFrom || brand.data.pricing.consultationFee,
    subscriptionType: brand.data.pricing.subscriptionType,
    pros: brand.data.pros,
    cons: brand.data.cons,
    bestFor: brand.data.bestFor,
    featured: brand.data.featured,
    features: brand.data.features,
    priorities: brand.data.priorities,
    priceMin: brand.data.pricing.priceMin,
    priceMax: brand.data.pricing.priceMax,
  }));

// Quick picks for this category
const quickPicks = [
  {
    segment: 'budget' as const,
    brandName: 'BlueChew',
    brandSlug: 'bluechew',
    detail: '$20/month, no consult fee',
  },
  {
    segment: 'privacy' as const,
    brandName: 'Ro',
    brandSlug: 'ro',
    detail: 'Most discreet, flexible dosing',
  },
  {
    segment: 'speed' as const,
    brandName: 'Hims',
    brandSlug: 'hims',
    detail: '48hr approval, free shipping',
  },
  {
    segment: 'quality' as const,
    brandName: 'Ro',
    brandSlug: 'ro',
    detail: 'Brand & generic, MD oversight',
  },
];

const schema = {
  '@context': 'https://schema.org',
  '@type': 'MedicalWebPage',
  name: 'Best ED Telehealth Services',
  description: 'Compare the best online ED treatment services including Hims, Ro, BlueChew, and more.',
  about: {
    '@type': 'MedicalCondition',
    name: 'Erectile Dysfunction',
  },
};

// FAQ data for AI-SEO optimization
const faqs = [
  {
    question: "Is online ED treatment legal and safe?",
    answer: "Yes, online ED treatment is completely legal and safe when using licensed telehealth services. Every service we list uses licensed US physicians who review your medical history before prescribing. The medications are FDA-approved drugs identical to those from local pharmacies - just delivered to your door. Services like Hims, Ro, and BlueChew have been operating for years and serve millions of men with full medical oversight."
  },
  {
    question: "How much does online ED treatment cost?",
    answer: "Online ED treatment costs $4-12 per dose for generic medications (sildenafil or tadalafil). Most services charge $0-49 for the initial consultation. Subscription plans average $20-90 per month depending on dosage and frequency. Generic options are 80-90% cheaper than brand-name Viagra or Cialis."
  },
  {
    question: "Will my package be discreet?",
    answer: "Yes, all packages are completely discreet. Medications arrive in plain cardboard boxes or padded envelopes with no logos or medical labels. The return address shows the company name but nothing about the contents. Credit card statements also use discrete business names, not 'ED medication' or similar terms."
  },
  {
    question: "What's the difference between generic and brand-name ED medication?",
    answer: "Generic ED medications (sildenafil, tadalafil) contain the exact same active ingredients as brand-name Viagra and Cialis at identical dosages. They are FDA-approved as bioequivalent, meaning they work the same way. The only difference is price - generics cost $4-12 per dose while brand names cost $70+ per dose."
  },
  {
    question: "How effective are ED medications?",
    answer: "ED medications are 60-70% effective for most men. Sildenafil (generic Viagra) works for about 70% of men with ED. Tadalafil (generic Cialis) has similar effectiveness rates. Results vary based on the underlying cause of ED, overall health, and proper usage. Most services allow you to switch medications or adjust dosages if the first option doesn't work."
  },
  {
    question: "Can I try one dose without a subscription?",
    answer: "It depends on the service. Ro allows one-time orders without a subscription commitment. Hims and BlueChew require subscriptions but allow cancellation anytime, even after the first shipment. Most services offer flexibility to pause, skip, or cancel subscriptions without penalties."
  },
  {
    question: "How long does delivery take?",
    answer: "Most online ED services deliver within 2-5 business days. Some offer expedited shipping (1-2 days) for an additional fee. After your consultation is approved (typically 24-48 hours), medications ship from US-based pharmacies via USPS, UPS, or FedEx."
  },
  {
    question: "Will this affect my insurance or medical records?",
    answer: "No, most online ED services don't use insurance and operate on a cash-pay basis. This means treatments never appear on insurance records or affect premiums. While you can't use insurance to cover costs, generic ED medications are so affordable ($4-12 per dose) that cash payment is often cheaper than insurance co-pays anyway."
  },
  {
    question: "How quickly do ED medications work?",
    answer: "Sildenafil (generic Viagra) takes 30-60 minutes to work and lasts 4-6 hours. Tadalafil (generic Cialis) takes 1-2 hours to work but lasts up to 36 hours. For best results, take on an empty stomach. Effects vary by individual metabolism and dosage."
  },
  {
    question: "Do I need to talk to a doctor on video?",
    answer: "No, most services don't require video calls. You complete a medical questionnaire online, and a licensed physician reviews it asynchronously. If approved, they send the prescription to a pharmacy for fulfillment. Some services offer optional video consultations, but text-based questionnaires are the standard and are just as medically valid."
  }
];
---

<BaseLayout
  title="Best ED Telehealth Services - Sexual Health Comparison"
  description="Compare the top erectile dysfunction telehealth services. Find the best ED treatment options, pricing, and reviews for Hims, Ro, BlueChew, Manual, and more."
  image="/images/sexual-health-og.png"
  schema={schema}
>
  <!-- Hero Section -->
  <section class="bg-white py-12 lg:py-16 border-b border-slate-200">
    <div class="container-custom">
      <div class="max-w-4xl">
        <div class="flex items-center gap-2 text-sm text-slate-600 mb-6 px-4">
          <a href="/" class="hover:text-brand-accent transition-colors">Home</a>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewPort="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
          <span class="text-slate-900 font-medium">Sexual Health</span>
        </div>

        <div class="px-4 mb-6">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-50 border border-emerald-200 text-sm font-medium text-emerald-700">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            New to telehealth? We'll walk you through it
          </div>
        </div>

        <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 mb-4 sm:mb-6 leading-tight px-4">
          Get Your Confidence Back
        </h1>
        <p class="text-base sm:text-lg lg:text-xl text-slate-600 leading-relaxed mb-6 sm:mb-8 max-w-2xl px-4">
          Stop avoiding intimacy. Stop making excuses. Real ED treatment from real doctors — discreetly delivered to your door. Compare services that actually work, with honest pricing and total privacy.
        </p>

        <div class="flex flex-wrap gap-3">
          <a href="#comparison" class="btn-primary">
            Find My Treatment
          </a>
          <a href="#faq" class="btn-outline">
            Common Questions
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Stats -->
  <section class="py-10 bg-slate-50 border-b border-slate-200">
    <div class="container-custom">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8 text-center">
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">{sexualHealthBrands.length}</div>
          <div class="text-sm text-slate-600">Services Compared</div>
        </div>
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">$4+</div>
          <div class="text-sm text-slate-600">Starting Price</div>
        </div>
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">FDA</div>
          <div class="text-sm text-slate-600">Approved</div>
        </div>
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">24-48h</div>
          <div class="text-sm text-slate-600">Delivery</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Picks Section -->
  <section class="section bg-white">
    <div class="container-custom">
      <QuickPicks picks={quickPicks} category="Sexual Health" />
    </div>
  </section>

  <!-- Privacy Assurance -->
  <section class="py-8 bg-white">
    <div class="container-custom">
      <PrivacyAssurance />
    </div>
  </section>

  <!-- Trust Signals -->
  <section class="py-6 bg-white">
    <div class="container-custom">
      <TrustSignals
        lastUpdated={new Date()}
        reviewsCount={15000}
        servicesCompared={sexualHealthBrands.length}
      />
    </div>
  </section>

  <!-- Comparison Section -->
  <section id="comparison" class="section bg-white">
    <div class="container-custom">
      <div class="mb-10">
        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-2 sm:mb-3 px-4">
          Find Your Treatment
        </h2>
        <p class="text-slate-600">
          Updated {new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
        </p>
      </div>

      <FilterableComparison brands={sexualHealthBrands} location="sexual-health-table" />
    </div>
  </section>

  <!-- Treatment Options -->
  <section id="treatments" class="section-light">
    <div class="container-custom">
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-3 sm:mb-4 text-center px-4">
        What Works for ED
      </h2>
      <p class="text-lg text-slate-600 mb-10 text-center max-w-2xl mx-auto">
        Three proven medications that help you perform — from $4 per dose.
      </p>

      <div class="grid md:grid-cols-3 gap-6">
        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center">
              <Icon name="pill" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Sildenafil</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Generic Viagra</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Take 30-60 minutes before activity. Effects last 4-6 hours. The most well-known and widely available option.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $4-$8/dose</li>
              <li>• Ro: $4-$12/dose</li>
              <li>• BlueChew: ~$20/month</li>
            </ul>
          </div>
        </div>

        <div class="card p-6 ring-2 ring-brand-accent">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-amber-100 text-amber-600 flex items-center justify-center">
              <Icon name="zap" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Tadalafil</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Generic Cialis</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Daily or as-needed dosing. Effects last up to 36 hours. Popular for spontaneity and weekend use.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $3-$10/dose</li>
              <li>• Ro: $4-$11/dose</li>
              <li>• BlueChew: ~$30/month</li>
            </ul>
          </div>
        </div>

        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center">
              <Icon name="target" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Vardenafil</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Generic Levitra</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Similar to Viagra but may work faster for some. Take 30-60 minutes before. Effects last 4-5 hours.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $10-$12/dose</li>
              <li>• Ro: $8-$14/dose</li>
              <li>• Limited availability</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section with Schema Markup -->
  <section id="faq" class="section bg-white">
    <div class="container-custom max-w-3xl">
      <FAQSection
        title="Common Questions About Online ED Treatment"
        categoryName="Erectile Dysfunction Treatment"
        faqs={faqs}
      />
    </div>
  </section>

  <!-- Related Content -->
  <section class="section-light border-t border-slate-200">
    <div class="container-custom">
      <h2 class="text-2xl font-bold text-slate-900 mb-6 text-center">
        Explore More Categories
      </h2>
      <div class="grid md:grid-cols-3 gap-6">
        <a href="/hair-health" class="card-hover p-6 group">
          <div class="mb-3 flex justify-center">
            <Icon name="hair-health" class="w-8 h-8 text-amber-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Hair Health
          </h3>
          <p class="text-slate-600 text-sm">
            Compare hair loss treatment services and medications.
          </p>
        </a>
        <a href="/testosterone" class="card-hover p-6 group">
          <div class="mb-3 flex justify-center">
            <Icon name="testosterone" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Testosterone & Hormones
          </h3>
          <p class="text-slate-600 text-sm">
            TRT clinics and hormone optimization services.
          </p>
        </a>
        <a href="/mental-health" class="card-hover p-6 group">
          <div class="mb-3 flex justify-center">
            <Icon name="mental-health" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Mental Health
          </h3>
          <p class="text-slate-600 text-sm">
            Online therapy platforms and psychiatric care.
          </p>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
