---
import BaseLayout from '../layouts/BaseLayout.astro';
import ComparisonTable from '../components/ComparisonTable.astro';
import QuickPicks from '../components/QuickPicks.astro';
import TrustSignals from '../components/TrustSignals.astro';
import FAQSection from '../components/FAQSection.astro';
import Icon from '../components/Icon.astro';
import type { Brand } from '../components/ComparisonTable.astro';
import { getCollection } from 'astro:content';

// Dynamically load all weight-loss brands from content collection
const allBrands = await getCollection('brands');
const weightLossBrands = allBrands.filter(brand =>
  brand.data.categories.includes('weight-loss')
);

// Map to Brand interface format
const brands: Brand[] = weightLossBrands
  .sort((a, b) => (b.data.rating || 0) - (a.data.rating || 0)) // Sort by rating descending
  .map(brand => ({
    name: brand.data.title,
    slug: brand.data.affiliateId,
    rating: brand.data.rating,
    consultationFee: brand.data.pricing.consultationFee,
    medicationFrom: brand.data.pricing.medicationFrom,
    subscriptionType: brand.data.pricing.subscriptionType,
    pros: brand.data.pros.slice(0, 3), // Take top 3 pros
    cons: brand.data.cons.slice(0, 2), // Take top 2 cons
    bestFor: brand.data.bestFor || [],
    featured: brand.data.featured || false,
  }));

// Quick picks for this category
const quickPicks = [
  {
    segment: 'budget' as const,
    brandName: 'Hims',
    brandSlug: 'hims',
    detail: '$199/month, no consult fee',
  },
  {
    segment: 'privacy' as const,
    brandName: 'Ro',
    brandSlug: 'ro',
    detail: 'Discreet packaging & billing',
  },
  {
    segment: 'speed' as const,
    brandName: 'Hims',
    brandSlug: 'hims',
    detail: 'Fast approval, quick start',
  },
  {
    segment: 'quality' as const,
    brandName: 'Ro',
    brandSlug: 'ro',
    detail: 'Brand-name meds, MD oversight',
  },
];

const schema = {
  '@context': 'https://schema.org',
  '@type': 'MedicalWebPage',
  name: 'Best Weight Loss Services & GLP-1 Programs',
  description: 'Compare the best online weight loss services offering GLP-1 medications like Wegovy, Ozempic, and Mounjaro.',
  about: {
    '@type': 'MedicalCondition',
    name: 'Obesity',
  },
};

// FAQ data for AI-SEO optimization
const faqs = [
  {
    question: "How much do GLP-1 medications cost online?",
    answer: "GLP-1 medications cost $99-350 per month through online weight loss services. Ro charges $99-145/month for compounded semaglutide. Hims offers GLP-1s at $199-299/month. Numan costs $149-249/month. Brand-name Wegovy costs $1300+/month without insurance but many services offer compounded versions at 60-80% lower prices. Most services require a $49-99 initial consultation."
  },
  {
    question: "Is compounded semaglutide safe?",
    answer: "Yes, compounded semaglutide is safe when sourced from FDA-registered 503B pharmacies. Compounded versions contain the same active ingredient (semaglutide) as Wegovy/Ozempic but are made by compounding pharmacies instead of drug manufacturers. Services like Ro, Hims, and Numan only use FDA-registered pharmacies. Compounded semaglutide has the same effectiveness (10-15% total body weight loss) as brand-name versions."
  },
  {
    question: "Do I qualify for GLP-1 weight loss medication?",
    answer: "You typically qualify for GLP-1 medications if your BMI is 30+ or BMI is 27+ with weight-related health conditions (diabetes, high blood pressure, high cholesterol). Most online services require BMI of 27-30+ and will not prescribe if you're already at healthy weight. You must be 18+ years old. Services conduct medical screenings to ensure safety - pregnant women and people with certain conditions (pancreatitis history, thyroid cancer) cannot use GLP-1s."
  },
  {
    question: "How much weight can I lose with GLP-1 medications?",
    answer: "Most users lose 10-15% of total body weight with GLP-1 medications over 12-18 months. Clinical studies show semaglutide (Wegovy) results in 12-15% weight loss, tirzepatide (Mounjaro/Zepbound) results in 15-20% weight loss. For a 200-pound person, this means losing 20-40 pounds. Results vary - some lose more, some less. Maximum weight loss typically occurs at 60-72 weeks. Combining medication with diet/exercise improves results."
  },
  {
    question: "What are the side effects of GLP-1 medications?",
    answer: "Common GLP-1 side effects include nausea (40-50% of users), vomiting, diarrhea, constipation, and stomach pain. Most side effects are mild-moderate and improve after 4-8 weeks as your body adjusts. Rare but serious side effects include pancreatitis, gallbladder problems, and thyroid tumors (in animal studies). Starting at low doses and gradually increasing reduces side effects. Most users find side effects manageable and worth the weight loss benefits."
  },
  {
    question: "Does insurance cover online weight loss programs?",
    answer: "Most insurance doesn't cover online weight loss services or compounded GLP-1s. Brand-name Wegovy/Mounjaro are covered by some insurance plans but often require prior authorization and documented weight loss attempts. Compounded semaglutide from online services is not covered because it's not FDA-approved. However, cash-pay compounded versions ($99-350/month) are often cheaper than insurance co-pays for brand names ($50-100/month co-pay after $500+ deductible)."
  },
  {
    question: "What's the difference between semaglutide and tirzepatide?",
    answer: "Semaglutide (Wegovy, Ozempic) targets one hormone (GLP-1) and produces 10-15% weight loss. Tirzepatide (Mounjaro, Zepbound) targets two hormones (GLP-1 and GIP) and produces 15-20% weight loss. Tirzepatide is newer, slightly more effective, but costs more ($250-350/month vs $99-299/month for semaglutide). Both are weekly injections with similar side effects. Tirzepatide may have fewer nausea side effects."
  },
  {
    question: "How long do I need to stay on GLP-1 medications?",
    answer: "Most people need to stay on GLP-1 medications long-term (1+ years) to maintain weight loss. Clinical trials show 50-70% of weight returns within 1 year of stopping medication. Some users transition to maintenance doses after reaching goal weight. Think of GLP-1s like managing chronic conditions - ongoing treatment maintains results. Combining medication with sustainable lifestyle changes improves long-term success even after stopping."
  },
  {
    question: "Can I get GLP-1 weight loss medication without seeing a doctor?",
    answer: "No, GLP-1 medications require a prescription from a licensed physician. However, online services provide virtual consultations ($0-99) where you complete a medical questionnaire and a doctor reviews it remotely. No video calls required for most services. If approved (70-80% approval rate), medication ships to your door. This is legitimate telehealth, not a workaround - services like Ro, Hims, and Numan use board-certified physicians."
  },
  {
    question: "Which online weight loss service is best?",
    answer: "Ro offers best value at $99-145/month for compounded semaglutide with comprehensive support. Hims provides most convenience with integrated health platform at $199-299/month. Numan offers middle-ground pricing at $149-249/month with strong physician oversight. Your choice depends on priorities: lowest cost (Ro), convenience (Hims), or balanced approach (Numan). All three use FDA-registered compounding pharmacies and licensed physicians."
  }
];
---

<BaseLayout
  title="Best Weight Loss Services - Compare GLP-1 Programs (Wegovy, Ozempic)"
  description="Compare top weight loss services offering GLP-1 medications including Wegovy, Ozempic, Mounjaro, and semaglutide. Find the best pricing and support programs."
  schema={schema}
>
  <!-- Hero Section -->
  <section class="bg-white py-12 lg:py-16 border-b border-slate-200">
    <div class="container-custom">
      <div class="max-w-4xl">
        <div class="flex items-center gap-2 text-sm text-slate-600 mb-6">
          <a href="/" class="hover:text-brand-accent transition-colors">Home</a>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
          <span class="text-slate-900 font-medium">Weight Loss</span>

        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-50 border border-emerald-200 text-sm font-medium text-emerald-700 mb-6">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          New to telehealth? We'll walk you through it
        </div>
        </div>

        <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 mb-4 sm:mb-6 leading-tight px-4">
          Finally Lose the Weight
        </h1>
        <p class="text-base sm:text-lg lg:text-xl text-slate-600 leading-relaxed mb-6 sm:mb-8 max-w-2xl mx-auto px-4">
          Stop yo-yo dieting. Start seeing real results. GLP-1 medications like Wegovy and Mounjaro with medical support — helping you lose 15-20% of your body weight. Compare programs with honest pricing.
        </p>

        <div class="flex flex-wrap gap-3">
          <a href="#comparison" class="btn-primary">
            Find My Program
          </a>
          <a href="#medications" class="btn-outline">
            How It Works
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Stats -->
  <section class="py-10 bg-slate-50 border-b border-slate-200">
    <div class="container-custom">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8 text-center">
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">6+</div>
          <div class="text-sm text-slate-600">Programs Compared</div>
        </div>
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">$145+</div>
          <div class="text-sm text-slate-600">Starting Price</div>
        </div>
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">15%+</div>
          <div class="text-sm text-slate-600">Average Weight Loss</div>
        </div>
        <div>
          <div class="text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-1">FDA</div>
          <div class="text-sm text-slate-600">Approved</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Picks Section -->
  <section class="section bg-white">
    <div class="container-custom">
      <QuickPicks picks={quickPicks} category="Weight Loss" />
    </div>
  </section>

  <!-- Trust Signals -->
  <section class="py-6 bg-white">
    <div class="container-custom">
      <TrustSignals
        lastUpdated={new Date()}
        reviewsCount={10000}
        servicesCompared={6}
      />
    </div>
  </section>

  <!-- Intro Section -->
  <section class="section bg-white">
    <div class="container-custom max-w-4xl">
      <div class="prose prose-lg max-w-none">
        <h2 class="text-3xl font-bold text-slate-900 mb-4">Understanding GLP-1 Medications</h2>
        <p class="text-slate-600 leading-relaxed mb-6">
          GLP-1 (glucagon-like peptide-1) medications have revolutionized weight loss treatment. Originally developed
          for type 2 diabetes, medications like semaglutide (Wegovy, Ozempic) and tirzepatide (Mounjaro, Zepbound)
          help regulate appetite, slow digestion, and promote significant weight loss averaging 15-20% of body weight.
        </p>
        <p class="text-slate-600 leading-relaxed">
          Modern telehealth platforms make these medications accessible with online consultations, home delivery,
          and comprehensive support programs including nutrition coaching, exercise guidance, and ongoing medical supervision.
        </p>
      </div>
    </div>
  </section>

  <!-- Comparison Section -->
  <section id="comparison" class="section-light">
    <div class="container-custom">
      <div class="mb-10">
        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-2 sm:mb-3 px-4">
          Weight Loss Service Comparison
        </h2>
        <p class="text-slate-600">
          Updated {new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
        </p>
      </div>

      <ComparisonTable brands={brands} location="weight-loss-table" />
    </div>
  </section>

  <!-- Medication Options -->
  <section id="medications" class="section bg-white">
    <div class="container-custom">
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-3 sm:mb-4 text-center px-4">
        GLP-1 Medication Options
      </h2>
      <p class="text-lg text-slate-600 mb-10 text-center max-w-2xl mx-auto">
        Compare the most effective weight loss medications available through telehealth.
      </p>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="card p-6 ring-2 ring-brand-accent">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center">
              <Icon name="injection" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Semaglutide</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Wegovy / Ozempic</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Weekly injection. Clinical trials showed 15-17% average weight loss. FDA-approved for weight management.
            Most widely available GLP-1 medication.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Availability:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Ro: Brand-name Wegovy</li>
              <li>• Hims: Compounded version</li>
              <li>• Most platforms offer</li>
            </ul>
          </div>
        </div>

        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-purple-100 text-purple-600 flex items-center justify-center">
              <Icon name="zap" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Tirzepatide</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">Mounjaro / Zepbound</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Dual GLP-1/GIP receptor agonist. Clinical trials showed up to 22% weight loss. Newer medication
            showing enhanced effectiveness.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Availability:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Ro: Brand-name available</li>
              <li>• Hims: Compounded version</li>
              <li>• Limited availability</li>
            </ul>
          </div>
        </div>

        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-12 h-12 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center">
              <Icon name="affordability" class="w-6 h-6" />
            </div>
            <h3 class="font-bold text-xl text-slate-900">Compounded Options</h3>
          </div>
          <p class="text-sm text-slate-500 mb-2">More Affordable</p>
          <p class="text-slate-600 text-sm mb-4 leading-relaxed">
            Pharmacy-compounded semaglutide or tirzepatide. Same active ingredient at lower cost.
            Not FDA-approved but widely used.
          </p>
          <div class="text-sm">
            <div class="font-medium text-slate-900 mb-2">Pricing:</div>
            <ul class="space-y-1 text-slate-600">
              <li>• Hims: $199-299/month</li>
              <li>• Found: $199+/month</li>
              <li>• 40-60% cheaper</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- What to Expect -->
  <section class="section-light">
    <div class="container-custom max-w-4xl">
      <h2 class="text-3xl font-bold text-slate-900 mb-8 text-center">What to Expect</h2>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="card p-6">
          <div class="mb-3 flex justify-center">
            <Icon name="clipboard" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 text-center">Week 1-4</h3>
          <p class="text-slate-600 text-sm text-center">
            Initial dose titration. Mild nausea is common. Average 2-5 lbs weight loss as body adjusts to medication.
          </p>
        </div>
        <div class="card p-6">
          <div class="mb-3 flex justify-center">
            <Icon name="chart-down" class="w-8 h-8 text-emerald-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 text-center">Month 2-6</h3>
          <p class="text-slate-600 text-sm text-center">
            Steady weight loss of 1-2 lbs per week. Appetite suppression becomes pronounced. Side effects typically decrease.
          </p>
        </div>
        <div class="card p-6">
          <div class="mb-3 flex justify-center">
            <Icon name="target" class="w-8 h-8 text-purple-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 text-center">Month 6-12</h3>
          <p class="text-slate-600 text-sm text-center">
            Maximum weight loss achieved. Most studies show 15-22% total body weight loss by month 12-18.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section with Schema Markup -->
  <section id="faq" class="section bg-white">
    <div class="container-custom max-w-3xl">
      <FAQSection
        title="Common Questions About GLP-1 Weight Loss Medications"
        categoryName="GLP-1 Medications & Weight Loss"
        faqs={faqs}
      />
    </div>
  </section>

  <!-- Related Content -->
  <section class="section-light border-t border-slate-200">
    <div class="container-custom">
      <h2 class="text-2xl font-bold text-slate-900 mb-6 text-center">
        Explore More Categories
      </h2>
      <div class="grid md:grid-cols-3 gap-6">
        <a href="/testosterone" class="card-hover p-6 group">
          <div class="mb-3 flex justify-center">
            <Icon name="testosterone" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Testosterone & Hormones
          </h3>
          <p class="text-slate-600 text-sm">
            TRT clinics and hormone optimization services.
          </p>
        </a>
        <a href="/mental-health" class="card-hover p-6 group">
          <div class="mb-3 flex justify-center">
            <Icon name="mental-health" class="w-8 h-8 text-blue-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Mental Health
          </h3>
          <p class="text-slate-600 text-sm">
            Online therapy and psychiatric care platforms.
          </p>
        </a>
        <a href="/diagnostics" class="card-hover p-6 group">
          <div class="mb-3 flex justify-center">
            <Icon name="diagnostics" class="w-8 h-8 text-purple-600" />
          </div>
          <h3 class="font-semibold text-lg mb-2 text-slate-900 group-hover:text-brand-accent transition-colors">
            Diagnostics & Wellness
          </h3>
          <p class="text-slate-600 text-sm">
            At-home health testing and monitoring.
          </p>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
