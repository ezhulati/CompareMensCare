---
/**
 * AuthorBio Component
 *
 * Displays author information with research credentials and expertise.
 * Optimized for AI-SEO by showcasing data-driven authority without medical credentials.
 *
 * Props:
 * - name: Author name (string, required)
 * - role: Author role/title (string, optional)
 * - bio: Brief bio description (string, optional)
 * - expertise: Array of expertise areas (string[], optional)
 * - showExtended: Show extended bio with expertise areas (boolean, default: false)
 * - authorSlug: URL slug for author profile page (string, optional)
 */

interface Props {
  name: string;
  role?: string;
  bio?: string;
  expertise?: string[];
  showExtended?: boolean;
  authorSlug?: string;
}

const {
  name,
  role = 'Research Analyst',
  bio,
  expertise = [],
  showExtended = false,
  authorSlug,
} = Astro.props;

// Default bios for different author types
const defaultBios: Record<string, string> = {
  'Editorial Team': 'Our editorial team consists of experienced health researchers and comparison specialists who have collectively analyzed over 50 telehealth providers and reviewed hundreds of research studies from authoritative sources including NIH, PubMed, and clinical guidelines.',
  'Research Analyst': 'Experienced health researcher specializing in telehealth service analysis, pricing comparisons, and evidence-based information synthesis.',
  'Comparison Specialist': 'Data analyst focused on creating objective comparisons of men\'s health telehealth services through systematic research and multi-criteria evaluation.',
};

const displayBio = bio || defaultBios[name] || defaultBios[role] || defaultBios['Research Analyst'];

// Default expertise areas by role
const defaultExpertise: Record<string, string[]> = {
  'Editorial Team': ['Telehealth Research', 'Data Analysis', 'Medical Literature Review', 'Pricing Comparisons'],
  'Research Analyst': ['Evidence-Based Research', 'Data Verification', 'Source Citation'],
  'Comparison Specialist': ['Multi-Criteria Analysis', 'Cost Normalization', 'Service Evaluation'],
};

const displayExpertise = expertise.length > 0 ? expertise : (defaultExpertise[name] || defaultExpertise[role] || defaultExpertise['Research Analyst']);
---

{showExtended ? (
  <!-- Extended Author Bio (for blog posts and guides) -->
  <div class="author-bio-extended bg-slate-50 border border-slate-200 rounded-lg p-6 my-8">
    <div class="flex items-start gap-4">
      <!-- Author Avatar Icon -->
      <div class="flex-shrink-0">
        <div class="w-16 h-16 rounded-full bg-brand-accent/10 text-brand-accent flex items-center justify-center">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </div>
      </div>

      <!-- Author Info -->
      <div class="flex-1">
        <div class="mb-2">
          {authorSlug ? (
            <a href={`/author/${authorSlug}`} class="text-lg font-bold text-slate-900 hover:text-brand-accent transition-colors">
              {name}
            </a>
          ) : (
            <h3 class="text-lg font-bold text-slate-900">{name}</h3>
          )}
          <p class="text-sm text-slate-600 mt-1">{role}</p>
        </div>

        <p class="text-sm text-slate-700 leading-relaxed mb-3">
          {displayBio}
        </p>

        {displayExpertise.length > 0 && (
          <div>
            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">Research Focus</p>
            <div class="flex flex-wrap gap-2">
              {displayExpertise.map((area: string) => (
                <span class="px-2 py-1 text-xs font-medium text-slate-700 bg-white border border-slate-200 rounded">
                  {area}
                </span>
              ))}
            </div>
          </div>
        )}

        <div class="mt-4 pt-4 border-t border-slate-200">
          <p class="text-xs text-slate-500">
            <strong>Research Methodology:</strong> All content is based on verified data from official provider websites,
            peer-reviewed research, and clinical guidelines. Updated monthly for accuracy.
          </p>
        </div>
      </div>
    </div>
  </div>
) : (
  <!-- Compact Author Bio (for meta info sections) -->
  <div class="author-bio-compact inline-flex items-center gap-2">
    <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
    </svg>
    {authorSlug ? (
      <a href={`/author/${authorSlug}`} class="text-sm text-slate-900 hover:text-brand-accent transition-colors">
        <span>By <strong>{name}</strong></span>
      </a>
    ) : (
      <span class="text-sm text-slate-900">By <strong>{name}</strong></span>
    )}
  </div>
)}

<style>
  .author-bio-extended {
    /* Ensure good readability for AI parsing */
    line-height: 1.6;
  }

  .author-bio-compact {
    /* Compact version for inline use */
    white-space: nowrap;
  }
</style>
